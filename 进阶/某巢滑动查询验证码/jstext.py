import execjs
import logging
import time
logging.basicConfig(level = logging.INFO,format = '%(asctime)s - %(name)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)


def exjs(path,user,data):
    file = open(path, "r", encoding="utf-8").read()
    ctx = execjs.compile(file)
    if data == '':
        Data = ctx.call(user)
    else:
        Data = ctx.call(user,data)
    return Data

def run():
    # ---------------------------------------------------------------------------------------------------------------------------------------------
    Urldata = './urldata.js'
    UrlUid = exjs(Urldata, 'UrlUid', '')
    # print('UrlUid---->',UrlUid)
    logger.info('UrlUid为；{}'.format(UrlUid))
    # ---------------------------------------------------------------------------------------------------------------------------------------------
    SignInput = './PostDatas.js'
    ip = "*.*.*.*"
    checkId = "*"
    UUID = UrlUid
    track = [
    {
        "x": 1,
        "y": 44,
        "time": 1732612959235
    },
    {
        "x": 2,
        "y": 44,
        "time": 1732612959242
    },
    {
        "x": 4,
        "y": 44,
        "time": 1732612959250
    },
    {
        "x": 7,
        "y": 44,
        "time": 1732612959259
    },
    {
        "x": 12,
        "y": 44,
        "time": 1732612959266
    },
    {
        "x": 19,
        "y": 44,
        "time": 1732612959274
    },
    {
        "x": 26,
        "y": 44,
        "time": 1732612959283
    },
    {
        "x": 32,
        "y": 44,
        "time": 1732612959290
    },
    {
        "x": 40,
        "y": 44,
        "time": 1732612959299
    },
    {
        "x": 47,
        "y": 44,
        "time": 1732612959307
    },
    {
        "x": 52,
        "y": 44,
        "time": 1732612959315
    },
    {
        "x": 58,
        "y": 44,
        "time": 1732612959323
    },
    {
        "x": 60,
        "y": 44,
        "time": 1732612959331
    },
    {
        "x": 61,
        "y": 44,
        "time": 1732612959338
    },
    {
        "x": 62,
        "y": 44,
        "time": 1732612959346
    },
    {
        "x": 64,
        "y": 44,
        "time": 1732612959354
    },
    {
        "x": 65,
        "y": 44,
        "time": 1732612959371
    },
    {
        "x": 67,
        "y": 44,
        "time": 1732612959378
    },
    {
        "x": 71,
        "y": 44,
        "time": 1732612959387
    },
    {
        "x": 77,
        "y": 44,
        "time": 1732612959395
    },
    {
        "x": 82,
        "y": 44,
        "time": 1732612959403
    },
    {
        "x": 88,
        "y": 44,
        "time": 1732612959410
    },
    {
        "x": 93,
        "y": 44,
        "time": 1732612959419
    },
    {
        "x": 98,
        "y": 44,
        "time": 1732612959427
    },
    {
        "x": 102,
        "y": 44,
        "time": 1732612959435
    },
    {
        "x": 106,
        "y": 44,
        "time": 1732612959442
    },
    {
        "x": 110,
        "y": 44,
        "time": 1732612959450
    },
    {
        "x": 113,
        "y": 44,
        "time": 1732612959458
    },
    {
        "x": 115,
        "y": 44,
        "time": 1732612959466
    },
    {
        "x": 118,
        "y": 44,
        "time": 1732612959474
    },
    {
        "x": 121,
        "y": 44,
        "time": 1732612959483
    },
    {
        "x": 123,
        "y": 44,
        "time": 1732612959491
    },
    {
        "x": 127,
        "y": 44,
        "time": 1732612959499
    },
    {
        "x": 130,
        "y": 44,
        "time": 1732612959507
    },
    {
        "x": 133,
        "y": 44,
        "time": 1732612959515
    },
    {
        "x": 137,
        "y": 44,
        "time": 1732612959523
    },
    {
        "x": 140,
        "y": 44,
        "time": 1732612959531
    },
    {
        "x": 143,
        "y": 44,
        "time": 1732612959538
    },
    {
        "x": 144,
        "y": 44,
        "time": 1732612959547
    },
    {
        "x": 146,
        "y": 44,
        "time": 1732612959554
    },
    {
        "x": 146,
        "y": 44,
        "time": 1732612959562
    },
    {
        "x": 147,
        "y": 44,
        "time": 1732612959570
    },
    {
        "x": 148,
        "y": 44,
        "time": 1732612959635
    },
    {
        "x": 148,
        "y": 44,
        "time": 1732612959642
    },
    {
        "x": 150,
        "y": 44,
        "time": 1732612959651
    },
    {
        "x": 152,
        "y": 44,
        "time": 1732612959658
    },
    {
        "x": 154,
        "y": 44,
        "time": 1732612959666
    },
    {
        "x": 156,
        "y": 44,
        "time": 1732612959674
    },
    {
        "x": 158,
        "y": 44,
        "time": 1732612959683
    },
    {
        "x": 159,
        "y": 44,
        "time": 1732612959691
    },
    {
        "x": 160,
        "y": 44,
        "time": 1732612959698
    },
    {
        "x": 161,
        "y": 44,
        "time": 1732612959706
    },
    {
        "x": 162,
        "y": 44,
        "time": 1732612959715
    },
    {
        "x": 162,
        "y": 44,
        "time": 1732612959723
    },
    {
        "x": 164,
        "y": 44,
        "time": 1732612959850
    },
    {
        "x": 166,
        "y": 44,
        "time": 1732612959858
    },
    {
        "x": 167,
        "y": 44,
        "time": 1732612959867
    },
    {
        "x": 169,
        "y": 44,
        "time": 1732612959875
    },
    {
        "x": 172,
        "y": 44,
        "time": 1732612959883
    },
    {
        "x": 173,
        "y": 44,
        "time": 1732612959891
    },
    {
        "x": 174,
        "y": 44,
        "time": 1732612959898
    },
    {
        "x": 176,
        "y": 44,
        "time": 1732612960107
    },
    {
        "x": 177,
        "y": 44,
        "time": 1732612960115
    },
    {
        "x": 178,
        "y": 44,
        "time": 1732612960123
    },
    {
        "x": 180,
        "y": 44,
        "time": 1732612960131
    },
    {
        "x": 180,
        "y": 44,
        "time": 1732612960139
    }
]
    file = open(SignInput, "r", encoding="utf-8").read()
    ctx = execjs.compile(file)
    Input = ctx.call('SignInput', ip, checkId, UUID, track)
    # print('SignInput---->',Input)
    logger.info('SignInput为；{}'.format(Input))
    # ---------------------------------------------------------------------------------------------------------------------------------------------
    SignData = "./PostDatas.js"
    sign = exjs(SignData, "SignData", Input)
    logger.info('sign为；{}'.format(sign))
    # print('sign---->', sign)
    # ---------------------------------------------------------------------------------------------------------------------------------------------
    argdata = './PostDatas.js'
    aesKey = "RGpW132pHBfwU6az"
    file = open(argdata, "r", encoding="utf-8").read()
    ctx = execjs.compile(file)
    arg = ctx.call('argdata', sign, track, aesKey)
    # print('encrypted---->',arg)
    logger.info('全部加密后为；{}'.format(arg))
    # a=int(time.time()*1000)
    # b=(180,45)
    # d=b[0]/4.5
    # print(d)
    # logger.info('{} {} {}'.format(sign, arg, aesKey))
if __name__ == '__main__':
    # {
    #     "data": {
    #         "sign": "4a3014b8b4b9d33c16eead99b02537b3",
    #
    #     },
    #     "aesKey": "FF18RuRuHQao1yX9"
    # }
    # ---------------------------------------------------------------------------------------------------------------------------------------------
    SignInput = './PostDatas.js'
    ip = "*.*.*.*"
    checkId = "*"
    UUID = '*-*-*-*-*'
    track =[
                {
                    "x": 2,
                    "y": 52,
                    "time": 1732614394759
                },
                {
                    "x": 7,
                    "y": 52,
                    "time": 1732614394767
                },
                {
                    "x": 15,
                    "y": 52,
                    "time": 1732614394775
                },
                {
                    "x": 27,
                    "y": 52,
                    "time": 1732614394784
                },
                {
                    "x": 38,
                    "y": 52,
                    "time": 1732614394791
                },
                {
                    "x": 51,
                    "y": 52,
                    "time": 1732614394800
                },
                {
                    "x": 65,
                    "y": 52,
                    "time": 1732614394807
                },
                {
                    "x": 78,
                    "y": 52,
                    "time": 1732614394815
                },
                {
                    "x": 90,
                    "y": 52,
                    "time": 1732614394824
                },
                {
                    "x": 98,
                    "y": 52,
                    "time": 1732614394831
                },
                {
                    "x": 106,
                    "y": 52,
                    "time": 1732614394839
                },
                {
                    "x": 110,
                    "y": 52,
                    "time": 1732614394847
                },
                {
                    "x": 113,
                    "y": 52,
                    "time": 1732614394855
                },
                {
                    "x": 115,
                    "y": 52,
                    "time": 1732614394863
                },
                {
                    "x": 115,
                    "y": 52,
                    "time": 1732614394911
                },
                {
                    "x": 118,
                    "y": 52,
                    "time": 1732614394919
                },
                {
                    "x": 121,
                    "y": 52,
                    "time": 1732614394927
                },
                {
                    "x": 125,
                    "y": 52,
                    "time": 1732614394935
                },
                {
                    "x": 133,
                    "y": 52,
                    "time": 1732614394943
                },
                {
                    "x": 141,
                    "y": 52,
                    "time": 1732614394951
                },
                {
                    "x": 148,
                    "y": 52,
                    "time": 1732614394959
                },
                {
                    "x": 153,
                    "y": 52,
                    "time": 1732614394967
                },
                {
                    "x": 158,
                    "y": 52,
                    "time": 1732614394976
                },
                {
                    "x": 161,
                    "y": 52,
                    "time": 1732614394984
                },
                {
                    "x": 161,
                    "y": 52,
                    "time": 1732614394992
                },
                {
                    "x": 162,
                    "y": 52,
                    "time": 1732614394999
                },
                {
                    "x": 163,
                    "y": 52,
                    "time": 1732614395151
                },
                {
                    "x": 164,
                    "y": 52,
                    "time": 1732614395159
                },
                {
                    "x": 165,
                    "y": 52,
                    "time": 1732614395167
                },
                {
                    "x": 165,
                    "y": 52,
                    "time": 1732614395176
                },
                {
                    "x": 166,
                    "y": 52,
                    "time": 1732614395184
                },
                {
                    "x": 167,
                    "y": 52,
                    "time": 1732614395192
                },
                {
                    "x": 167,
                    "y": 52,
                    "time": 1732614395632
                },
                {
                    "x": 170,
                    "y": 52,
                    "time": 1732614395640
                },
                {
                    "x": 172,
                    "y": 52,
                    "time": 1732614395647
                },
                {
                    "x": 176,
                    "y": 52,
                    "time": 1732614395655
                },
                {
                    "x": 181,
                    "y": 52,
                    "time": 1732614395663
                },
                {
                    "x": 185,
                    "y": 52,
                    "time": 1732614395671
                },
                {
                    "x": 187,
                    "y": 52,
                    "time": 1732614395680
                },
                {
                    "x": 188,
                    "y": 52,
                    "time": 1732614395688
                },
                {
                    "x": 189,
                    "y": 52,
                    "time": 1732614395696
                },
                {
                    "x": 189,
                    "y": 52,
                    "time": 1732614395704
                },
                {
                    "x": 190,
                    "y": 52,
                    "time": 1732614395863
                },
                {
                    "x": 191,
                    "y": 52,
                    "time": 1732614396312
                },
                {
                    "x": 192,
                    "y": 52,
                    "time": 1732614396320
                },
                {
                    "x": 193,
                    "y": 52,
                    "time": 1732614396328
                },
                {
                    "x": 194,
                    "y": 52,
                    "time": 1732614396335
                },
                {
                    "x": 195,
                    "y": 52,
                    "time": 1732614396356
                }
            ]
    file = open(SignInput, "r", encoding="utf-8").read()
    ctx = execjs.compile(file)
    Input = ctx.call('SignInput', ip, checkId, UUID, track)
    # print('SignInput---->',Input)
    logger.info('SignInput为；{}'.format(Input))
    # ---------------------------------------------------------------------------------------------------------------------------------------------
    SignData = "./PostDatas.js"
    sign = exjs(SignData, "SignData", Input)
    logger.info('sign为；{}'.format(sign))
    # print('sign---->', sign)
    # ---------------------------------------------------------------------------------------------------------------------------------------------
    argdata = './PostDatas.js'
    aesKey = "FF18RuRuHQao1yX9"
    file = open(argdata, "r", encoding="utf-8").read()
    ctx = execjs.compile(file)
    arg = ctx.call('argdata', sign, track, aesKey)
    # print('encrypted---->',arg)
    logger.info('全部加密后为；{}'.format(arg))









